<!DOCTYPE html><html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fondotex</title><style>
<link rel="icon" href="icon.png">
<link rel="apple-touch-icon" href="icon.png">
<meta name="theme-color" content="#000000">
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:white;
  display:flex;
  flex-direction:column;
  min-height:100vh;
}

header{
  padding:15px;
  text-align:center;
  background:#020617;
  font-size:20px;
  font-weight:bold;
}

main{
  flex:1;
  display:flex;
  flex-direction:column;
  padding:15px;
  gap:15px;
}

/* Vista previa */
#preview{
  flex:1;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:15px;
  overflow:hidden;
  position:relative;
}

#previewText{
  font-size:40px;
  font-weight:bold;
  text-align:center;
  padding:20px;
  word-break:break-word;
}

/* Controles */
.controls{
  background:#020617;
  padding:15px;
  border-radius:15px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

.controls label{
  font-size:13px;
  opacity:0.8;
}

.controls input,
.controls select{
  width:100%;
  padding:8px;
  border-radius:8px;
  border:none;
  outline:none;
}

#textInput{
  grid-column:1/3;
}

button{
  grid-column:1/3;
  padding:12px;
  border:none;
  border-radius:12px;
  background:#22c55e;
  color:#000;
  font-weight:bold;
  cursor:pointer;
}

button:hover{
  background:#16a34a;
}
</style></head>
<body><header>游꿛 Generador de Fondos con Texto</header><main>  <!-- Vista previa -->  <div id="preview">
    <div id="previewText">Tu texto aqu칤</div>
  </div>  <!-- Controles -->  <div class="controls"><!-- Texto -->
<div style="grid-column:1/3">
  <label>Texto</label>
  <input id="textInput" type="text" placeholder="Escribe tu frase...">
</div>

<!-- Color texto -->
<div>
  <label>Color texto</label>
  <input id="textColor" type="color" value="#ffffff">
</div>

<!-- Fondo -->
<div>
  <label>Color fondo</label>
  <input id="bgColor" type="color" value="#000000">
</div>

<!-- Tama침o -->
<div>
  <label>Tama침o letra</label>
  <input id="fontSize" type="range" min="20" max="100" value="40">
</div>

<!-- Fuente -->
<div>
  <label>Fuente</label>
  <select id="fontFamily">
    <option value="Arial">Arial</option>
    <option value="Georgia">Georgia</option>
    <option value="Impact">Impact</option>
    <option value="Courier New">Courier</option>
    <option value="Verdana">Verdana</option>
  </select>
</div>

<!-- Negrita -->
<div>
  <label>Negrita</label>
  <select id="fontWeight">
    <option value="normal">Normal</option>
    <option value="bold">Bold</option>
  </select>
</div>

<!-- Alineaci칩n -->
<div>
  <label>Alineaci칩n</label>
  <select id="textAlign">
    <option value="center">Centro</option>
    <option value="left">Izquierda</option>
    <option value="right">Derecha</option>
  </select>
</div>

<button onclick="descargarImagen()">游닌 Descargar Fondo</button>

  </div></main><script>
const textInput = document.getElementById("textInput");
const previewText = document.getElementById("previewText");
const preview = document.getElementById("preview");

const textColor = document.getElementById("textColor");
const bgColor = document.getElementById("bgColor");
const fontSize = document.getElementById("fontSize");
const fontFamily = document.getElementById("fontFamily");
const fontWeight = document.getElementById("fontWeight");
const textAlign = document.getElementById("textAlign");

function actualizar(){
  previewText.textContent = textInput.value || "Tu texto aqu칤";
  previewText.style.color = textColor.value;
  previewText.style.fontSize = fontSize.value + "px";
  previewText.style.fontFamily = fontFamily.value;
  previewText.style.fontWeight = fontWeight.value;
  previewText.style.textAlign = textAlign.value;
  preview.style.background = bgColor.value;
}

[textInput,textColor,bgColor,fontSize,fontFamily,fontWeight,textAlign]
.forEach(el=>{
  el.addEventListener("input", actualizar);
});

actualizar();

/* Descargar imagen */
function descargarImagen(){

  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");

  canvas.width = 1080;
  canvas.height = 1920;

  // Fondo
  ctx.fillStyle = bgColor.value;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Texto
  ctx.fillStyle = textColor.value;
  ctx.font = `${fontWeight.value} ${fontSize.value*2}px ${fontFamily.value}`;
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";

  wrapText(ctx, previewText.textContent, canvas.width/2, canvas.height/2, 900, fontSize.value*2+10);

  const link = document.createElement("a");
  link.download = "fondo_texto.png";
  link.href = canvas.toDataURL();
  link.click();
}

function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
  const words = text.split(" ");
  let line = "";
  let lines = [];

  for(let n=0;n<words.length;n++){
    let testLine = line + words[n] + " ";
    let metrics = ctx.measureText(testLine);

    if(metrics.width > maxWidth && n>0){
      lines.push(line);
      line = words[n] + " ";
    }else{
      line = testLine;
    }
  }

  lines.push(line);

  const startY = y - (lines.length/2)*lineHeight;

  lines.forEach((l,i)=>{
    ctx.fillText(l, x, startY + i*lineHeight);
  });
}
</script></body>
</html>